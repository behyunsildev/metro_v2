<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>서울 지하철 노선도 어안렌즈 효과</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
            background-color: white;
        }
        
        svg {
            width: 100%;
            height: 100vh;
            cursor: move;
        }
        
        .station {
            cursor: help;
        }
        
        .station-label {
            font-size: 10px;
            text-anchor: middle;
            dominant-baseline: central;
            pointer-events: none;
            fill: #606060;
        }
        

    </style>
</head>
<body>

    
    <svg id="subway-map"></svg>
    
    <script>
        const width = window.innerWidth;
        const height = window.innerHeight;
        
        const svg = d3.select("#subway-map")
            .attr("width", width)
            .attr("height", height);
        
        const zoom = d3.zoom()
            .scaleExtent([0.5, 4])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
                resetFisheyeEffect();
            });
        
        svg.call(zoom);
        const g = svg.append("g");
        
        const lineColors = {
            "1호선": "#0052A4",
            "2호선": "#00A84D", 
            "3호선": "#EF7C1C",
            "4호선": "#00A5DE",
            "5호선": "#996CAC",
            "6호선": "#CD7C2F",
            "7호선": "#747F00",
            "8호선": "#E6186C",
            "9호선": "#BDB092",
            "신분당선": "#D4003B",
            "경의중앙선": "#77C4A3",
            "GTXA-A": "#8B0000",
            "GTXA-C": "#8B0000",
            "수인분당선": "#FABE00",
            "김포골드라인": "#A17917",
            "우이신설선": "#B7C450",
            "경춘선": "#32C6A6",
            "공항철도": "#0090D2",
            "신림선": "#6789CA",
            "인천1호선": "#7CA8D5",
            "인천2호선": "#F5A251"
        };
        
        const stations = [
            // 1호선 주요 역들
            {id: "소요산", name: "소요산", x: 400, y: 50, lines: ["1호선"]},
            {id: "의정부", name: "의정부", x: 400, y: 350, lines: ["1호선"]},
            {id: "도봉산", name: "도봉산", x: 400, y: 440, lines: ["1호선"]},
            {id: "석계", name: "석계", x: 400, y: 650, lines: ["1호선", "6호선"]},
            {id: "회기", name: "회기", x: 400, y: 740, lines: ["1호선", "경의중앙선"]},
            {id: "청량리", name: "청량리", x: 400, y: 770, lines: ["1호선", "수인분당선"]},
            {id: "신설동", name: "신설동", x: 400, y: 830, lines: ["1호선", "우이신설선"]},
            {id: "동대문", name: "동대문", x: 400, y: 890, lines: ["1호선", "4호선"]},
            {id: "종로3가", name: "종로3가", x: 400, y: 950, lines: ["1호선", "3호선", "5호선"]},
            {id: "종각", name: "종각", x: 400, y: 980, lines: ["1호선"]},
            {id: "시청", name: "시청", x: 400, y: 1010, lines: ["1호선", "2호선"]},
            {id: "서울역", name: "서울역", x: 400, y: 1040, lines: ["1호선", "4호선", "GTXA-A"]},
            {id: "용산", name: "용산", x: 400, y: 1100, lines: ["1호선", "경의중앙선"]},
            {id: "노량진", name: "노량진", x: 400, y: 1130, lines: ["1호선", "9호선"]},
            {id: "신길", name: "신길", x: 400, y: 1190, lines: ["1호선", "5호선"]},
            {id: "영등포", name: "영등포", x: 400, y: 1220, lines: ["1호선"]},
            {id: "신도림", name: "신도림", x: 400, y: 1250, lines: ["1호선", "2호선"]},
            {id: "구로", name: "구로", x: 400, y: 1280, lines: ["1호선"]},
            {id: "가산디지털단지", name: "가산디지털단지", x: 450, y: 1280, lines: ["1호선", "7호선"]},
            {id: "구로", name: "구로", x: 400, y: 1280, lines: ["1호선"]},
            {id: "개봉", name: "개봉", x: 420, y: 1300, lines: ["1호선"]},
            {id: "오류동", name: "오류동", x: 440, y: 1320, lines: ["1호선"]},
            {id: "온수", name: "온수", x: 400, y: 1400, lines: ["1호선", "7호선"]},
            {id: "역곡", name: "역곡", x: 460, y: 1420, lines: ["1호선"]},
            {id: "소사", name: "소사", x: 480, y: 1440, lines: ["1호선"]},
            {id: "부천", name: "부천", x: 400, y: 1490, lines: ["1호선"]},
            {id: "중동", name: "중동", x: 500, y: 1480, lines: ["1호선"]},
            {id: "송내", name: "송내", x: 520, y: 1500, lines: ["1호선"]},
            {id: "부개", name: "부개", x: 540, y: 1520, lines: ["1호선"]},
            {id: "부평", name: "부평", x: 400, y: 1610, lines: ["1호선"]},
            {id: "백운", name: "백운", x: 560, y: 1580, lines: ["1호선"]},
            {id: "동암", name: "동암", x: 580, y: 1600, lines: ["1호선"]},
            {id: "간석", name: "간석", x: 600, y: 1620, lines: ["1호선"]},
            {id: "주안", name: "주안", x: 620, y: 1640, lines: ["1호선"]},
            {id: "도화", name: "도화", x: 640, y: 1660, lines: ["1호선"]},
            {id: "제물포", name: "제물포", x: 660, y: 1680, lines: ["1호선"]},
            {id: "도원", name: "도원", x: 680, y: 1700, lines: ["1호선"]},
            {id: "동인천", name: "동인천", x: 700, y: 1720, lines: ["1호선"]},
            {id: "인천", name: "인천", x: 400, y: 1880, lines: ["1호선", "수인분당선"]},
            {id: "금정", name: "금정", x: 800, y: 1280, lines: ["1호선", "4호선"]},
            {id: "군포", name: "군포", x: 820, y: 1300, lines: ["1호선"]},
            {id: "당정", name: "당정", x: 840, y: 1320, lines: ["1호선"]},
            {id: "의왕", name: "의왕", x: 860, y: 1340, lines: ["1호선"]},
            {id: "성균관대", name: "성균관대", x: 880, y: 1360, lines: ["1호선"]},
            {id: "화서", name: "화서", x: 900, y: 1380, lines: ["1호선"]},
            {id: "수원", name: "수원", x: 1100, y: 1280, lines: ["1호선", "수인분당선"]},
            {id: "세류", name: "세류", x: 1120, y: 1300, lines: ["1호선"]},
            {id: "병점", name: "병점", x: 1140, y: 1320, lines: ["1호선"]},
            {id: "세마", name: "세마", x: 1160, y: 1340, lines: ["1호선"]},
            {id: "오산대", name: "오산대", x: 1180, y: 1360, lines: ["1호선"]},
            {id: "오산", name: "오산", x: 1200, y: 1380, lines: ["1호선"]},
            {id: "진위", name: "진위", x: 1220, y: 1400, lines: ["1호선"]},
            {id: "송탄", name: "송탄", x: 1240, y: 1420, lines: ["1호선"]},
            {id: "서정리", name: "서정리", x: 1260, y: 1440, lines: ["1호선"]},
            {id: "지제", name: "지제", x: 1280, y: 1460, lines: ["1호선"]},
            {id: "평택지제", name: "평택지제", x: 1300, y: 1480, lines: ["1호선"]},
            {id: "평택", name: "평택", x: 1320, y: 1500, lines: ["1호선"]},
            {id: "성환", name: "성환", x: 1340, y: 1520, lines: ["1호선"]},
            {id: "직산", name: "직산", x: 1360, y: 1540, lines: ["1호선"]},
            {id: "두정", name: "두정", x: 1380, y: 1560, lines: ["1호선"]},
            {id: "천안", name: "천안", x: 1800, y: 1280, lines: ["1호선"]},
            {id: "봉명", name: "봉명", x: 1820, y: 1300, lines: ["1호선"]},
            {id: "쌍용", name: "쌍용", x: 1840, y: 1320, lines: ["1호선"]},
            {id: "아산", name: "아산", x: 1860, y: 1340, lines: ["1호선"]},
            {id: "탕정", name: "탕정", x: 1880, y: 1360, lines: ["1호선"]},
            {id: "배방", name: "배방", x: 1900, y: 1380, lines: ["1호선"]},
            {id: "온양온천", name: "온양온천", x: 1920, y: 1400, lines: ["1호선"]},
            {id: "신창", name: "신창", x: 2150, y: 1280, lines: ["1호선"]},
            
            // 2호선 주요 역들
            {id: "을지로입구", name: "을지로입구", x: 470, y: 1010, lines: ["2호선"]},
            {id: "을지로3가", name: "을지로3가", x: 540, y: 1010, lines: ["2호선", "3호선"]},
            {id: "을지로4가", name: "을지로4가", x: 610, y: 1010, lines: ["2호선", "5호선"]},
            {id: "동대문역사문화공원", name: "동대문역사문화공원", x: 680, y: 1010, lines: ["2호선", "4호선", "5호선"]},
            {id: "신당", name: "신당", x: 750, y: 1010, lines: ["2호선", "6호선"]},
            {id: "상왕십리", name: "상왕십리", x: 820, y: 1010, lines: ["2호선"]},
            {id: "왕십리", name: "왕십리", x: 890, y: 1010, lines: ["2호선", "5호선", "경의중앙선", "수인분당선"]},
            {id: "한양대", name: "한양대", x: 940, y: 1040, lines: ["2호선"]},
            {id: "뚝섬", name: "뚝섬", x: 980, y: 1080, lines: ["2호선"]},
            {id: "성수", name: "성수", x: 1020, y: 1120, lines: ["2호선"]},
            {id: "건대입구", name: "건대입구", x: 1000, y: 1190, lines: ["2호선", "7호선"]},
            {id: "구의", name: "구의", x: 1030, y: 1260, lines: ["2호선"]},
            {id: "강변", name: "강변", x: 1040, y: 1330, lines: ["2호선"]},
            {id: "잠실나루", name: "잠실나루", x: 1030, y: 1400, lines: ["2호선"]},
            {id: "잠실", name: "잠실", x: 1000, y: 1470, lines: ["2호선", "8호선"]},
            {id: "잠실새내", name: "잠실새내", x: 1000, y: 1540, lines: ["2호선"]},
            {id: "종합운동장", name: "종합운동장", x: 1000, y: 1610, lines: ["2호선", "9호선"]},
            {id: "삼성", name: "삼성", x: 950, y: 1650, lines: ["2호선"]},
            {id: "선릉", name: "선릉", x: 880, y: 1650, lines: ["2호선", "수인분당선"]},
            {id: "역삼", name: "역삼", x: 810, y: 1650, lines: ["2호선"]},
            {id: "강남", name: "강남", x: 740, y: 1650, lines: ["2호선", "신분당선"]},
            {id: "교대", name: "교대", x: 670, y: 1650, lines: ["2호선", "3호선"]},
            {id: "서초", name: "서초", x: 600, y: 1650, lines: ["2호선"]},
            {id: "방배", name: "방배", x: 530, y: 1650, lines: ["2호선"]},
            {id: "사당", name: "사당", x: 460, y: 1650, lines: ["2호선", "4호선"]},
            {id: "낙성대", name: "낙성대", x: 380, y: 1650, lines: ["2호선"]},
            {id: "서울대입구", name: "서울대입구", x: 300, y: 1650, lines: ["2호선"]},
            {id: "봉천", name: "봉천", x: 240, y: 1650, lines: ["2호선"]},
            {id: "신림", name: "신림", x: 180, y: 1650, lines: ["2호선"]},
            {id: "신대방", name: "신대방", x: 120, y: 1630, lines: ["2호선"]},
            {id: "구로디지털단지", name: "구로디지털단지", x: 80, y: 1600, lines: ["2호선"]},
            {id: "대림", name: "대림", x: 40, y: 1580, lines: ["2호선", "7호선"]},
            {id: "문래", name: "문래", x: 120, y: 1420, lines: ["2호선"]},
            {id: "영등포구청", name: "영등포구청", x: 280, y: 1250, lines: ["2호선", "5호선"]},
            {id: "당산", name: "당산", x: 220, y: 1250, lines: ["2호선", "9호선"]},
            {id: "합정", name: "합정", x: 160, y: 1250, lines: ["2호선", "6호선"]},
            {id: "홍대입구", name: "홍대입구", x: 100, y: 1250, lines: ["2호선", "경의중앙선"]},
            {id: "신촌", name: "신촌", x: 100, y: 1180, lines: ["2호선"]},
            {id: "이대", name: "이대", x: 120, y: 1130, lines: ["2호선"]},
            {id: "아현", name: "아현", x: 150, y: 1080, lines: ["2호선"]},
            {id: "충정로", name: "충정로", x: 170, y: 1010, lines: ["2호선", "5호선"]},
            {id: "용답", name: "용답", x: 1050, y: 1150, lines: ["2호선"]},
            {id: "신답", name: "신답", x: 1070, y: 1180, lines: ["2호선"]},
            {id: "용두", name: "용두", x: 1090, y: 1210, lines: ["2호선"]},
            {id: "까치산", name: "까치산", x: 160, y: 1050, lines: ["2호선", "5호선"]},
            
            // 3호선 주요 역들
            {id: "대화", name: "대화", x: 200, y: 600, lines: ["3호선"]},
            {id: "정발산", name: "정발산", x: 240, y: 660, lines: ["3호선"]},
            {id: "대곡", name: "대곡", x: 300, y: 750, lines: ["3호선", "경의중앙선", "GTXA-A"]},
            {id: "화정", name: "화정", x: 320, y: 780, lines: ["3호선"]},
            {id: "연신내", name: "연신내", x: 270, y: 780, lines: ["3호선", "6호선"]},
            {id: "불광", name: "불광", x: 200, y: 740, lines: ["3호선", "6호선"]},
            {id: "경복궁", name: "경복궁", x: 460, y: 970, lines: ["3호선"]},
            {id: "안국", name: "안국", x: 440, y: 960, lines: ["3호선"]},
            {id: "충무로", name: "충무로", x: 570, y: 1040, lines: ["3호선", "4호선"]},
            {id: "약수", name: "약수", x: 630, y: 1100, lines: ["3호선", "6호선"]},
            {id: "옥수", name: "옥수", x: 690, y: 1160, lines: ["3호선", "경의중앙선"]},
            {id: "압구정", name: "압구정", x: 720, y: 1190, lines: ["3호선"]},
            {id: "신사", name: "신사", x: 740, y: 1220, lines: ["3호선"]},
            {id: "고속터미널", name: "고속터미널", x: 700, y: 1280, lines: ["3호선", "7호선", "9호선"]},
            {id: "양재", name: "양재", x: 660, y: 1710, lines: ["3호선", "신분당선"]},
            {id: "도곡", name: "도곡", x: 620, y: 1770, lines: ["3호선", "수인분당선"]},
            {id: "수서", name: "수서", x: 520, y: 1920, lines: ["3호선", "GTXA-C"]},
            {id: "가락시장", name: "가락시장", x: 500, y: 1950, lines: ["3호선", "8호선"]},
            {id: "오금", name: "오금", x: 460, y: 2010, lines: ["3호선", "5호선"]},
            
            // 4호선 주요 역들
            {id: "당고개", name: "당고개", x: 500, y: 400, lines: ["4호선"]},
            {id: "상계", name: "상계", x: 500, y: 430, lines: ["4호선"]},
            {id: "노원", name: "노원", x: 500, y: 460, lines: ["4호선", "7호선"]},
            {id: "창동", name: "창동", x: 500, y: 490, lines: ["4호선"]},
            {id: "쌍문", name: "쌍문", x: 500, y: 520, lines: ["4호선"]},
            {id: "수유", name: "수유", x: 500, y: 550, lines: ["4호선"]},
            {id: "미아", name: "미아", x: 500, y: 580, lines: ["4호선"]},
            {id: "미아사거리", name: "미아사거리", x: 500, y: 610, lines: ["4호선"]},
            {id: "길음", name: "길음", x: 500, y: 640, lines: ["4호선"]},
            {id: "성신여대입구", name: "성신여대입구", x: 500, y: 670, lines: ["4호선", "우이신설선"]},
            {id: "한성대입구", name: "한성대입구", x: 500, y: 700, lines: ["4호선"]},
            {id: "혜화", name: "혜화", x: 500, y: 730, lines: ["4호선"]},
            {id: "동대문", name: "동대문", x: 400, y: 890, lines: ["4호선"]},
            {id: "동대문역사문화공원", name: "동대문역사문화공원", x: 680, y: 1010, lines: ["4호선"]},
            {id: "충무로", name: "충무로", x: 570, y: 1040, lines: ["4호선"]},
            {id: "명동", name: "명동", x: 500, y: 850, lines: ["4호선"]},
            {id: "회현", name: "회현", x: 500, y: 880, lines: ["4호선"]},
            {id: "서울역", name: "서울역", x: 400, y: 1040, lines: ["4호선"]},
            {id: "삼각지", name: "삼각지", x: 500, y: 940, lines: ["4호선", "6호선"]},
            {id: "신용산", name: "신용산", x: 500, y: 970, lines: ["4호선"]},
            {id: "이촌", name: "이촌", x: 500, y: 1000, lines: ["4호선", "경의중앙선"]},
            {id: "동작", name: "동작", x: 500, y: 1030, lines: ["4호선", "9호선"]},
            {id: "총신대입구", name: "총신대입구", x: 500, y: 1060, lines: ["4호선"]},
            {id: "사당", name: "사당", x: 460, y: 1650, lines: ["4호선"]},
            {id: "남태령", name: "남태령", x: 500, y: 1090, lines: ["4호선"]},
            {id: "선바위", name: "선바위", x: 500, y: 1150, lines: ["4호선"]},
            {id: "경마공원", name: "경마공원", x: 500, y: 1180, lines: ["4호선"]},
            {id: "대공원", name: "대공원", x: 500, y: 1210, lines: ["4호선"]},
            {id: "과천", name: "과천", x: 500, y: 1240, lines: ["4호선"]},
            {id: "정부과천청사", name: "정부과천청사", x: 500, y: 1270, lines: ["4호선"]},
            {id: "인덕원", name: "인덕원", x: 500, y: 1300, lines: ["4호선"]},
            {id: "평촌", name: "평촌", x: 500, y: 1330, lines: ["4호선"]},
            {id: "범계", name: "범계", x: 500, y: 1360, lines: ["4호선"]},
            {id: "금정", name: "금정", x: 800, y: 1280, lines: ["4호선"]},
            {id: "산본", name: "산본", x: 500, y: 1420, lines: ["4호선"]},
            {id: "수리산", name: "수리산", x: 500, y: 1450, lines: ["4호선"]},
            {id: "대야미", name: "대야미", x: 500, y: 1480, lines: ["4호선"]},
            {id: "반월", name: "반월", x: 500, y: 1510, lines: ["4호선"]},
            {id: "상록수", name: "상록수", x: 500, y: 1540, lines: ["4호선"]},
            {id: "한대앞", name: "한대앞", x: 500, y: 1570, lines: ["4호선"]},
            {id: "중앙", name: "중앙", x: 500, y: 1600, lines: ["4호선"]},
            {id: "고잔", name: "고잔", x: 500, y: 1630, lines: ["4호선"]},
            {id: "초지", name: "초지", x: 500, y: 1660, lines: ["4호선"]},
            {id: "안산", name: "안산", x: 500, y: 1690, lines: ["4호선"]},
            {id: "신길온천", name: "신길온천", x: 500, y: 1720, lines: ["4호선"]},
            {id: "정왕", name: "정왕", x: 500, y: 1750, lines: ["4호선"]},
            {id: "오이도", name: "오이도", x: 500, y: 1780, lines: ["4호선"]},
            
            // 5호선 주요 역들
            {id: "방화", name: "방화", x: 50, y: 1300, lines: ["5호선"]},
            {id: "개화산", name: "개화산", x: 70, y: 1300, lines: ["5호선"]},
            {id: "김포공항", name: "김포공항", x: 110, y: 1300, lines: ["5호선", "9호선", "김포골드라인"]},
            {id: "송정", name: "송정", x: 150, y: 1300, lines: ["5호선"]},
            {id: "마곡", name: "마곡", x: 190, y: 1300, lines: ["5호선"]},
            {id: "발산", name: "발산", x: 230, y: 1300, lines: ["5호선"]},
            {id: "우장산", name: "우장산", x: 270, y: 1300, lines: ["5호선"]},
            {id: "화곡", name: "화곡", x: 300, y: 1300, lines: ["5호선"]},
            {id: "목동", name: "목동", x: 320, y: 1300, lines: ["5호선"]},
            {id: "오목교", name: "오목교", x: 340, y: 1280, lines: ["5호선"]},
            {id: "양평", name: "양평", x: 360, y: 1260, lines: ["5호선"]},
            {id: "영등포시장", name: "영등포시장", x: 370, y: 1240, lines: ["5호선"]},
            {id: "신길", name: "신길", x: 400, y: 1190, lines: ["5호선"]},
            {id: "여의도", name: "여의도", x: 350, y: 1200, lines: ["5호선", "9호선"]},
            {id: "여의나루", name: "여의나루", x: 370, y: 1180, lines: ["5호선"]},
            {id: "마포", name: "마포", x: 390, y: 1160, lines: ["5호선"]},
            {id: "공덕", name: "공덕", x: 440, y: 1110, lines: ["5호선", "6호선"]},
            {id: "애오개", name: "애오개", x: 420, y: 1080, lines: ["5호선"]},
            {id: "충정로", name: "충정로", x: 170, y: 1010, lines: ["5호선"]},
            {id: "서대문", name: "서대문", x: 300, y: 990, lines: ["5호선"]},
            {id: "광화문", name: "광화문", x: 350, y: 970, lines: ["5호선"]},
            {id: "종로3가", name: "종로3가", x: 400, y: 950, lines: ["5호선"]},
            {id: "을지로4가", name: "을지로4가", x: 610, y: 1010, lines: ["5호선"]},
            {id: "동대문역사문화공원", name: "동대문역사문화공원", x: 680, y: 1010, lines: ["5호선"]},
            {id: "청구", name: "청구", x: 710, y: 1040, lines: ["5호선", "6호선"]},
            {id: "신금호", name: "신금호", x: 740, y: 1070, lines: ["5호선"]},
            {id: "행당", name: "행당", x: 770, y: 1100, lines: ["5호선"]},
            {id: "왕십리", name: "왕십리", x: 890, y: 1010, lines: ["5호선"]},
            {id: "마장", name: "마장", x: 820, y: 1130, lines: ["5호선"]},
            {id: "답십리", name: "답십리", x: 850, y: 1160, lines: ["5호선"]},
            {id: "장한평", name: "장한평", x: 870, y: 1190, lines: ["5호선"]},
            {id: "군자", name: "군자", x: 890, y: 1220, lines: ["5호선", "7호선"]},
            {id: "아차산", name: "아차산", x: 910, y: 1250, lines: ["5호선"]},
            {id: "광나루", name: "광나루", x: 930, y: 1280, lines: ["5호선"]},
            {id: "천호", name: "천호", x: 980, y: 1310, lines: ["5호선", "8호선"]},
            {id: "강동", name: "강동", x: 1000, y: 1340, lines: ["5호선"]},
            {id: "길동", name: "길동", x: 1020, y: 1370, lines: ["5호선"]},
            {id: "굽은다리", name: "굽은다리", x: 1040, y: 1400, lines: ["5호선"]},
            {id: "명일", name: "명일", x: 1060, y: 1430, lines: ["5호선"]},
            {id: "고덕", name: "고덕", x: 1080, y: 1460, lines: ["5호선"]},
            {id: "상일동", name: "상일동", x: 1160, y: 1490, lines: ["5호선"]},
            {id: "둔촌동", name: "둔촌동", x: 1120, y: 1350, lines: ["5호선"]},
            {id: "올림픽공원", name: "올림픽공원", x: 1140, y: 1340, lines: ["5호선"]},
            {id: "방이", name: "방이", x: 1160, y: 1330, lines: ["5호선"]},
            {id: "오금5", name: "오금", x: 460, y: 2010, lines: ["5호선"]},
            {id: "개롱", name: "개롱", x: 1180, y: 1320, lines: ["5호선"]},
            {id: "거여", name: "거여", x: 1200, y: 1310, lines: ["5호선"]},
            {id: "마천", name: "마천", x: 1190, y: 1340, lines: ["5호선"]},
            
            // 6호선 주요 역들
            {id: "응암", name: "응암", x: 200, y: 800, lines: ["6호선"]},
            {id: "디지털미디어시티", name: "디지털미디어시티", x: 440, y: 1040, lines: ["6호선", "경의중앙선"]},
            {id: "월드컵경기장", name: "월드컵경기장", x: 470, y: 1070, lines: ["6호선"]},
            {id: "상수", name: "상수", x: 590, y: 1190, lines: ["6호선"]},
            {id: "이태원", name: "이태원", x: 800, y: 1400, lines: ["6호선"]},
            {id: "보문", name: "보문", x: 1040, y: 1640, lines: ["6호선", "우이신설선"]},
            {id: "고려대", name: "고려대", x: 1100, y: 1700, lines: ["6호선"]},
            {id: "태릉입구", name: "태릉입구", x: 460, y: 640, lines: ["6호선", "7호선"]},
            {id: "봉화산", name: "봉화산", x: 1310, y: 1910, lines: ["6호선"]},
            
            // 7호선 주요 역들
            {id: "장암", name: "장암", x: 300, y: 400, lines: ["7호선"]},
            {id: "도봉산7", name: "도봉산", x: 320, y: 430, lines: ["7호선"]},
            {id: "수락산", name: "수락산", x: 340, y: 460, lines: ["7호선"]},
            {id: "마들", name: "마들", x: 360, y: 490, lines: ["7호선"]},
            {id: "노원", name: "노원", x: 500, y: 460, lines: ["7호선"]},
            {id: "중계", name: "중계", x: 380, y: 520, lines: ["7호선"]},
            {id: "하계", name: "하계", x: 400, y: 550, lines: ["7호선"]},
            {id: "공릉", name: "공릉", x: 420, y: 580, lines: ["7호선"]},
            {id: "태릉입구", name: "태릉입구", x: 460, y: 640, lines: ["7호선"]},
            {id: "먹골", name: "먹골", x: 480, y: 670, lines: ["7호선"]},
            {id: "중화", name: "중화", x: 500, y: 700, lines: ["7호선"]},
            {id: "상봉", name: "상봉", x: 520, y: 730, lines: ["7호선", "경의중앙선"]},
            {id: "면목", name: "면목", x: 540, y: 760, lines: ["7호선"]},
            {id: "사가정", name: "사가정", x: 560, y: 790, lines: ["7호선"]},
            {id: "용마산", name: "용마산", x: 580, y: 820, lines: ["7호선"]},
            {id: "중곡", name: "중곡", x: 600, y: 850, lines: ["7호선"]},
            {id: "군자", name: "군자", x: 890, y: 1220, lines: ["7호선"]},
            {id: "어린이대공원", name: "어린이대공원", x: 620, y: 880, lines: ["7호선"]},
            {id: "건대입구", name: "건대입구", x: 1000, y: 1190, lines: ["7호선"]},
            {id: "뚝섬유원지", name: "뚝섬유원지", x: 1030, y: 1160, lines: ["7호선"]},
            {id: "청담", name: "청담", x: 1060, y: 1130, lines: ["7호선"]},
            {id: "강남구청", name: "강남구청", x: 800, y: 1620, lines: ["7호선", "수인분당선"]},
            {id: "학동", name: "학동", x: 780, y: 1590, lines: ["7호선"]},
            {id: "논현", name: "논현", x: 740, y: 1560, lines: ["7호선"]},
            {id: "반포", name: "반포", x: 710, y: 1530, lines: ["7호선"]},
            {id: "고속터미널", name: "고속터미널", x: 700, y: 1280, lines: ["7호선"]},
            {id: "내방", name: "내방", x: 680, y: 1500, lines: ["7호선"]},
            {id: "이수", name: "이수", x: 660, y: 1470, lines: ["7호선"]},
            {id: "숭실대입구", name: "숭실대입구", x: 640, y: 1440, lines: ["7호선"]},
            {id: "상도", name: "상도", x: 620, y: 1410, lines: ["7호선"]},
            {id: "장승배기", name: "장승배기", x: 600, y: 1380, lines: ["7호선"]},
            {id: "신대방삼거리", name: "신대방삼거리", x: 580, y: 1350, lines: ["7호선"]},
            {id: "보라매", name: "보라매", x: 560, y: 1320, lines: ["7호선"]},
            {id: "신풍", name: "신풍", x: 540, y: 1290, lines: ["7호선"]},
            {id: "대림", name: "대림", x: 40, y: 1580, lines: ["7호선"]},
            {id: "남구로", name: "남구로", x: 20, y: 1550, lines: ["7호선"]},
            {id: "가산디지털단지", name: "가산디지털단지", x: 450, y: 1280, lines: ["7호선"]},
            {id: "철산", name: "철산", x: 0, y: 1520, lines: ["7호선"]},
            {id: "광명사거리", name: "광명사거리", x: -20, y: 1490, lines: ["7호선"]},
            {id: "천왕", name: "천왕", x: -40, y: 1460, lines: ["7호선"]},
            {id: "온수", name: "온수", x: 400, y: 1400, lines: ["7호선"]},
            {id: "까치울", name: "까치울", x: -80, y: 1400, lines: ["7호선"]},
            {id: "부천종합운동장", name: "부천종합운동장", x: -100, y: 1370, lines: ["7호선"]},
            {id: "춘의", name: "춘의", x: -120, y: 1340, lines: ["7호선"]},
            {id: "신중동", name: "신중동", x: -140, y: 1310, lines: ["7호선"]},
            {id: "부천시청", name: "부천시청", x: -160, y: 1280, lines: ["7호선"]},
            {id: "상동", name: "상동", x: -180, y: 1250, lines: ["7호선"]},
            {id: "삼산체육관", name: "삼산체육관", x: -200, y: 1220, lines: ["7호선"]},
            {id: "굴포천", name: "굴포천", x: -220, y: 1190, lines: ["7호선"]},
            {id: "부평구청", name: "부평구청", x: -240, y: 1160, lines: ["7호선"]},
            {id: "산곡", name: "산곡", x: -260, y: 1130, lines: ["7호선"]},
            {id: "석남", name: "석남", x: -280, y: 1100, lines: ["7호선"]},
            
            // 8호선 주요 역들
            {id: "암사", name: "암사", x: 1200, y: 1300, lines: ["8호선"]},
            {id: "몽촌토성", name: "몽촌토성", x: 1110, y: 1390, lines: ["8호선"]},
            {id: "석촌", name: "석촌", x: 1050, y: 1450, lines: ["8호선"]},
            {id: "문정", name: "문정", x: 960, y: 1540, lines: ["8호선"]},
            {id: "복정", name: "복정", x: 900, y: 1600, lines: ["8호선", "수인분당선"]},
            {id: "모란", name: "모란", x: 720, y: 1780, lines: ["8호선", "수인분당선"]},
            
            // 9호선 주요 역들
            {id: "개화", name: "개화", x: 30, y: 1320, lines: ["9호선"]},
            {id: "신방화", name: "신방화", x: 90, y: 1280, lines: ["9호선"]},
            {id: "염창", name: "염창", x: 270, y: 1280, lines: ["9호선"]},
            {id: "국회의사당", name: "국회의사당", x: 360, y: 1250, lines: ["9호선"]},
            {id: "신논현", name: "신논현", x: 610, y: 1270, lines: ["9호선"]},
            {id: "봉은사", name: "봉은사", x: 730, y: 1350, lines: ["9호선"]},
            
            // 신분당선 주요 역들
            {id: "판교", name: "판교", x: 600, y: 1830, lines: ["신분당선", "경강선"]},
            {id: "정자", name: "정자", x: 580, y: 1870, lines: ["신분당선"]},
            {id: "미금", name: "미금", x: 560, y: 1910, lines: ["신분당선"]},
            {id: "수지구청", name: "수지구청", x: 520, y: 1990, lines: ["신분당선"]},
            {id: "광교", name: "광교", x: 440, y: 2150, lines: ["신분당선"]},
            
            // 경의중앙선 주요 역들
            {id: "임진강", name: "임진강", x: -560, y: 760, lines: ["경의중앙선"]},
            {id: "운천", name: "운천", x: -530, y: 780, lines: ["경의중앙선"]},
            {id: "문산", name: "문산", x: -500, y: 800, lines: ["경의중앙선"]},
            {id: "파주", name: "파주", x: -470, y: 820, lines: ["경의중앙선"]},
            {id: "월롱", name: "월롱", x: -450, y: 830, lines: ["경의중앙선"]},
            {id: "운정", name: "운정", x: -440, y: 840, lines: ["경의중앙선"]},
            {id: "야당", name: "야당", x: -420, y: 860, lines: ["경의중앙선"]},
            {id: "금릉", name: "금릉", x: -400, y: 880, lines: ["경의중앙선"]},
            {id: "금촌", name: "금촌", x: -380, y: 900, lines: ["경의중앙선"]},
            {id: "탄현", name: "탄현", x: -360, y: 920, lines: ["경의중앙선"]},
            {id: "일산", name: "일산", x: -200, y: 1000, lines: ["경의중앙선"]},
            {id: "풍산", name: "풍산", x: -180, y: 1020, lines: ["경의중앙선"]},
            {id: "백마", name: "백마", x: -160, y: 1040, lines: ["경의중앙선"]},
            {id: "곡산", name: "곡산", x: -140, y: 1060, lines: ["경의중앙선"]},
            {id: "대곡경의", name: "대곡", x: 300, y: 750, lines: ["경의중앙선"]},
            {id: "능곡", name: "능곡", x: 280, y: 770, lines: ["경의중앙선"]},
            {id: "대화경의", name: "대화", x: 260, y: 790, lines: ["경의중앙선"]},
            {id: "행신", name: "행신", x: 130, y: 1220, lines: ["경의중앙선"]},
            {id: "강매", name: "강매", x: 150, y: 1200, lines: ["경의중앙선"]},
            {id: "디지털미디어시티경의", name: "디지털미디어시티", x: 440, y: 1040, lines: ["경의중앙선"]},
            {id: "수색", name: "수색", x: 420, y: 1060, lines: ["경의중앙선"]},
            {id: "용산경의", name: "용산", x: 400, y: 1100, lines: ["경의중앙선"]},
            {id: "이촌경의", name: "이촌", x: 500, y: 1000, lines: ["경의중앙선"]},
            {id: "서빙고", name: "서빙고", x: 520, y: 1020, lines: ["경의중앙선"]},
            {id: "한남", name: "한남", x: 540, y: 1040, lines: ["경의중앙선"]},
            {id: "옥수경의", name: "옥수", x: 690, y: 1160, lines: ["경의중앙선"]},
            {id: "응봉", name: "응봉", x: 710, y: 1140, lines: ["경의중앙선"]},
            {id: "왕십리경의", name: "왕십리", x: 890, y: 1010, lines: ["경의중앙선"]},
            {id: "청량리경의중앙", name: "청량리", x: 400, y: 770, lines: ["경의중앙선"]},
            {id: "회기경의중앙", name: "회기", x: 400, y: 740, lines: ["경의중앙선"]},
            {id: "중랑경의", name: "중랑", x: 1040, y: 1190, lines: ["경의중앙선"]},
            {id: "상봉", name: "상봉", x: 520, y: 730, lines: ["경의중앙선", "7호선"]},
            {id: "망우", name: "망우", x: 1100, y: 1250, lines: ["경의중앙선"]},
            {id: "양원", name: "양원", x: 1120, y: 1270, lines: ["경의중앙선"]},
            {id: "구리", name: "구리", x: 1140, y: 1290, lines: ["경의중앙선"]},
            {id: "도농", name: "도농", x: 1160, y: 1310, lines: ["경의중앙선"]},
            {id: "양정", name: "양정", x: 1180, y: 1330, lines: ["경의중앙선"]},
            {id: "덕소", name: "덕소", x: 1250, y: 1400, lines: ["경의중앙선"]},
            {id: "도심", name: "도심", x: 1270, y: 1420, lines: ["경의중앙선"]},
            {id: "팔당", name: "팔당", x: 1290, y: 1440, lines: ["경의중앙선"]},
            {id: "운길산", name: "운길산", x: 1310, y: 1460, lines: ["경의중앙선"]},
            {id: "양수", name: "양수", x: 1330, y: 1480, lines: ["경의중앙선"]},
            {id: "신원", name: "신원", x: 1350, y: 1500, lines: ["경의중앙선"]},
            {id: "국수", name: "국수", x: 1370, y: 1520, lines: ["경의중앙선"]},
            {id: "아신", name: "아신", x: 1390, y: 1540, lines: ["경의중앙선"]},
            {id: "오빈", name: "오빈", x: 1410, y: 1560, lines: ["경의중앙선"]},
            {id: "양평", name: "양평", x: 1520, y: 1670, lines: ["경의중앙선"]},
            {id: "원덕", name: "원덕", x: 1540, y: 1690, lines: ["경의중앙선"]},
            {id: "용문", name: "용문", x: 1580, y: 1730, lines: ["경의중앙선"]},
            {id: "지평", name: "지평", x: 1610, y: 1760, lines: ["경의중앙선"]},
            
            // GTXA
            {id: "킨텍스", name: "킨텍스", x: 250, y: 600, lines: ["GTXA-A"]},
            {id: "창릉", name: "창릉", x: 350, y: 650, lines: ["GTXA-A"]},
            {id: "고양", name: "고양", x: 320, y: 680, lines: ["GTXA-A"]},
            {id: "동탄", name: "동탄", x: 2200, y: 1300, lines: ["GTXA-C"]},
            
            // 수인분당선 추가 역들
            {id: "왕십리수인분당", name: "왕십리", x: 890, y: 1010, lines: ["수인분당선"]},
            {id: "서울숲", name: "서울숲", x: 920, y: 1040, lines: ["수인분당선"]},
            {id: "압구정로데오", name: "압구정로데오", x: 950, y: 1070, lines: ["수인분당선"]},
            {id: "강남구청수인분당", name: "강남구청", x: 800, y: 1620, lines: ["수인분당선"]},
            {id: "선정릉", name: "선정릉", x: 820, y: 1640, lines: ["수인분당선"]},
            {id: "한티", name: "한티", x: 1010, y: 1700, lines: ["수인분당선"]},
            {id: "도곡수인분당", name: "도곡", x: 620, y: 1770, lines: ["수인분당선"]},
            {id: "구룡", name: "구룡", x: 640, y: 1790, lines: ["수인분당선"]},
            {id: "개포동", name: "개포동", x: 660, y: 1810, lines: ["수인분당선"]},
            {id: "대모산입구", name: "대모산입구", x: 680, y: 1830, lines: ["수인분당선"]},
            {id: "수서수인분당", name: "수서", x: 520, y: 1920, lines: ["수인분당선"]},
            {id: "복정수인분당", name: "복정", x: 900, y: 1600, lines: ["수인분당선"]},
            {id: "가천대", name: "가천대", x: 880, y: 1620, lines: ["수인분당선"]},
            {id: "태평", name: "태평", x: 860, y: 1640, lines: ["수인분당선"]},
            {id: "모란수인분당", name: "모란", x: 720, y: 1780, lines: ["수인분당선"]},
            {id: "야탑수인분당", name: "야탑", x: 1250, y: 1930, lines: ["수인분당선"]},
            {id: "이매수인분당", name: "이매", x: 1220, y: 1900, lines: ["수인분당선"]},
            {id: "서현", name: "서현", x: 590, y: 1850, lines: ["수인분당선"]},
            {id: "판교수인분당", name: "판교", x: 600, y: 1830, lines: ["수인분당선"]},
            {id: "정자수인분당", name: "정자", x: 580, y: 1870, lines: ["수인분당선"]},
            {id: "미금수인분당", name: "미금", x: 560, y: 1910, lines: ["수인분당선"]},
            {id: "오리", name: "오리", x: 540, y: 1950, lines: ["수인분당선"]},
            {id: "죽전", name: "죽전", x: 520, y: 1990, lines: ["수인분당선"]},
            {id: "보정", name: "보정", x: 500, y: 2030, lines: ["수인분당선"]},
            {id: "구성", name: "구성", x: 480, y: 2070, lines: ["수인분당선"]},
            {id: "신갈", name: "신갈", x: 460, y: 2110, lines: ["수인분당선"]},
            {id: "기흥", name: "기흥", x: 440, y: 2150, lines: ["수인분당선"]},
            {id: "상갈", name: "상갈", x: 420, y: 2190, lines: ["수인분당선"]},
            {id: "청명", name: "청명", x: 400, y: 2230, lines: ["수인분당선"]},
            {id: "영통", name: "영통", x: 380, y: 2270, lines: ["수인분당선"]},
            {id: "망포", name: "망포", x: 360, y: 2310, lines: ["수인분당선"]},
            {id: "매탄권선", name: "매탄권선", x: 340, y: 2350, lines: ["수인분당선"]},
            {id: "수원수인분당", name: "수원", x: 1100, y: 1280, lines: ["수인분당선"]},
            {id: "고색", name: "고색", x: 1080, y: 1300, lines: ["수인분당선"]},
            {id: "오목천", name: "오목천", x: 1060, y: 1320, lines: ["수인분당선"]},
            {id: "어천", name: "어천", x: 1040, y: 1340, lines: ["수인분당선"]},
            {id: "야목", name: "야목", x: 1020, y: 1360, lines: ["수인분당선"]},
            {id: "사리", name: "사리", x: 1000, y: 1380, lines: ["수인분당선"]},
            {id: "달월", name: "달월", x: 980, y: 1400, lines: ["수인분당선"]},
            {id: "월곶", name: "월곶", x: 960, y: 1420, lines: ["수인분당선"]},
            {id: "소래포구", name: "소래포구", x: 940, y: 1440, lines: ["수인분당선"]},
            {id: "인천논현", name: "인천논현", x: 920, y: 1460, lines: ["수인분당선"]},
            {id: "호구포", name: "호구포", x: 900, y: 1480, lines: ["수인분당선"]},
            {id: "남동인더스파크", name: "남동인더스파크", x: 880, y: 1500, lines: ["수인분당선"]},
            {id: "원인재", name: "원인재", x: 860, y: 1520, lines: ["수인분당선"]},
            {id: "연수", name: "연수", x: 840, y: 1540, lines: ["수인분당선"]},
            {id: "송도", name: "송도", x: 820, y: 1560, lines: ["수인분당선"]},
            {id: "인하대", name: "인하대", x: 800, y: 1580, lines: ["수인분당선"]},
            {id: "숭의", name: "숭의", x: 780, y: 1600, lines: ["수인분당선"]},
            {id: "신포", name: "신포", x: 760, y: 1620, lines: ["수인분당선"]},
            {id: "인천수인분당", name: "인천", x: 400, y: 1880, lines: ["수인분당선"]},
            
            // 김포골드라인 주요 역들
            {id: "운양", name: "운양", x: 80, y: 1330, lines: ["김포골드라인"]},
            {id: "장기", name: "장기", x: 50, y: 1360, lines: ["김포골드라인"]},
            {id: "김포한강", name: "김포한강", x: 20, y: 1390, lines: ["김포골드라인"]},
            {id: "마송", name: "마송", x: -40, y: 1450, lines: ["김포골드라인"]},
            {id: "풍무", name: "풍무", x: -130, y: 1540, lines: ["김포골드라인"]},
            {id: "김포시청", name: "김포시청", x: -190, y: 1600, lines: ["김포골드라인"]},
            {id: "양촌", name: "양촌", x: -280, y: 1690, lines: ["김포골드라인"]},
            
            // 우이신설선 주요 역들
            {id: "우이", name: "우이", x: 350, y: 350, lines: ["우이신설선"]},
            {id: "북한산우이", name: "북한산우이", x: 360, y: 380, lines: ["우이신설선"]},
            {id: "정릉", name: "정릉", x: 380, y: 440, lines: ["우이신설선"]},
            
            // 경춘선 주요 역들
            {id: "청량리경춘", name: "청량리", x: 400, y: 770, lines: ["경춘선"]},
            {id: "회기경춘", name: "회기", x: 400, y: 740, lines: ["경춘선"]},
            {id: "중랑", name: "중랑", x: 1040, y: 1190, lines: ["경춘선"]},
            {id: "상봉경춘", name: "상봉", x: 520, y: 730, lines: ["경춘선"]},
            {id: "망우경춘", name: "망우", x: 1100, y: 1250, lines: ["경춘선"]},
            {id: "신내", name: "신내", x: 1150, y: 1200, lines: ["경춘선"]},
            {id: "갈매", name: "갈매", x: 1200, y: 1150, lines: ["경춘선"]},
            {id: "별내", name: "별내", x: 1250, y: 1100, lines: ["경춘선"]},
            {id: "퇴계원", name: "퇴계원", x: 1300, y: 1050, lines: ["경춘선"]},
            {id: "사릉", name: "사릉", x: 1350, y: 1000, lines: ["경춘선"]},
            {id: "금곡", name: "금곡", x: 1400, y: 950, lines: ["경춘선"]},
            {id: "평내호평", name: "평내호평", x: 1450, y: 900, lines: ["경춘선"]},
            {id: "천마산", name: "천마산", x: 1500, y: 850, lines: ["경춘선"]},
            {id: "마석", name: "마석", x: 1550, y: 800, lines: ["경춘선"]},
            {id: "대성리", name: "대성리", x: 1600, y: 750, lines: ["경춘선"]},
            {id: "청평", name: "청평", x: 1650, y: 700, lines: ["경춘선"]},
            {id: "상천", name: "상천", x: 1700, y: 650, lines: ["경춘선"]},
            {id: "가평", name: "가평", x: 1750, y: 600, lines: ["경춘선"]},
            {id: "굴봉산", name: "굴봉산", x: 1800, y: 550, lines: ["경춘선"]},
            {id: "백양리", name: "백양리", x: 1850, y: 500, lines: ["경춘선"]},
            {id: "강촌", name: "강촌", x: 1900, y: 450, lines: ["경춘선"]},
            {id: "김유정", name: "김유정", x: 1950, y: 400, lines: ["경춘선"]},
            {id: "남춘천", name: "남춘천", x: 2000, y: 350, lines: ["경춘선"]},
            {id: "춘천", name: "춘천", x: 2050, y: 300, lines: ["경춘선"]},
            
            // 공항철도 주요 역들
            {id: "서울역공항", name: "서울역", x: 400, y: 1040, lines: ["공항철도"]},
            {id: "공덕공항", name: "공덕", x: 440, y: 1110, lines: ["공항철도"]},
            {id: "홍대입구공항", name: "홍대입구", x: 100, y: 1250, lines: ["공항철도"]},
            {id: "디지털미디어시티공항", name: "디지털미디어시티", x: 440, y: 1040, lines: ["공항철도"]},
            {id: "김포공항공항", name: "김포공항", x: 110, y: 1300, lines: ["공항철도"]},
            {id: "계양", name: "계양", x: -50, y: 1100, lines: ["공항철도"]},
            {id: "검암", name: "검암", x: -100, y: 1050, lines: ["공항철도"]},
            {id: "청라국제도시", name: "청라국제도시", x: -150, y: 1000, lines: ["공항철도"]},
            {id: "영종", name: "영종", x: -200, y: 950, lines: ["공항철도"]},
            {id: "운서", name: "운서", x: -250, y: 900, lines: ["공항철도"]},
            {id: "공항화물청사", name: "공항화물청사", x: -300, y: 850, lines: ["공항철도"]},
            {id: "인천국제공항1터미널", name: "인천국제공항1터미널", x: -350, y: 800, lines: ["공항철도"]},
            {id: "인천국제공항2터미널", name: "인천국제공항2터미널", x: -400, y: 750, lines: ["공항철도"]},
            {id: "삼동", name: "삼동", x: 630, y: 1860, lines: ["경강선"]},
            {id: "이매", name: "이매", x: 640, y: 1870, lines: ["경강선"]},
            {id: "경기광주", name: "경기광주", x: 660, y: 1890, lines: ["경강선"]},
            {id: "초월", name: "초월", x: 680, y: 1910, lines: ["경강선"]},
            {id: "곤지암", name: "곤지암", x: 700, y: 1930, lines: ["경강선"]},
            {id: "신둔도예촌", name: "신둔도예촌", x: 720, y: 1950, lines: ["경강선"]},
            {id: "이천", name: "이천", x: 780, y: 2010, lines: ["경강선"]},
            {id: "부발", name: "부발", x: 800, y: 2030, lines: ["경강선"]},
            {id: "세종대왕릉", name: "세종대왕릉", x: 820, y: 2050, lines: ["경강선"]},
            {id: "여주", name: "여주", x: 870, y: 2100, lines: ["경강선"]},
            
            // 신림선 주요 역들
            {id: "대방", name: "대방", x: 200, y: 1600, lines: ["신림선"]},
            {id: "신길", name: "신길", x: 400, y: 1190, lines: ["신림선"]},
            {id: "보라매병원", name: "보라매병원", x: 220, y: 1620, lines: ["신림선"]},
            {id: "보라매공원", name: "보라매공원", x: 240, y: 1630, lines: ["신림선"]},
            {id: "신림", name: "신림", x: 180, y: 1650, lines: ["신림선"]},
            {id: "서원", name: "서원", x: 160, y: 1670, lines: ["신림선"]},
            {id: "서울대벤처타운", name: "서울대벤처타운", x: 140, y: 1690, lines: ["신림선"]},
            {id: "관악산", name: "관악산", x: 120, y: 1710, lines: ["신림선"]},
            
            // 인천1호선 주요 역들
            {id: "계양인천", name: "계양", x: 750, y: 1840, lines: ["인천1호선"]},
            {id: "귤현", name: "귤현", x: 730, y: 1820, lines: ["인천1호선"]},
            {id: "박촌", name: "박촌", x: 710, y: 1800, lines: ["인천1호선"]},
            {id: "임학", name: "임학", x: 690, y: 1780, lines: ["인천1호선"]},
            {id: "계산", name: "계산", x: 670, y: 1760, lines: ["인천1호선"]},
            {id: "경인교대입구", name: "경인교대입구", x: 650, y: 1740, lines: ["인천1호선"]},
            {id: "작전", name: "작전", x: 630, y: 1720, lines: ["인천1호선"]},
            {id: "갈산", name: "갈산", x: 610, y: 1700, lines: ["인천1호선"]},
            {id: "부평인천", name: "부평", x: 590, y: 1680, lines: ["인천1호선"]},
            {id: "부평구청인천", name: "부평구청", x: 570, y: 1660, lines: ["인천1호선"]},
            {id: "부평시장", name: "부평시장", x: 550, y: 1640, lines: ["인천1호선"]},
            {id: "백운인천", name: "백운", x: 530, y: 1620, lines: ["인천1호선"]},
            {id: "동암인천", name: "동암", x: 510, y: 1600, lines: ["인천1호선"]},
            {id: "간석인천", name: "간석", x: 490, y: 1580, lines: ["인천1호선"]},
            {id: "주안인천", name: "주안", x: 470, y: 1560, lines: ["인천1호선"]},
            {id: "도화인천", name: "도화", x: 450, y: 1540, lines: ["인천1호선"]},
            {id: "제물포인천", name: "제물포", x: 430, y: 1520, lines: ["인천1호선"]},
            {id: "도원인천", name: "도원", x: 410, y: 1500, lines: ["인천1호선"]},
            {id: "동인천인천", name: "동인천", x: 390, y: 1480, lines: ["인천1호선"]},
            {id: "인천인천", name: "인천", x: 370, y: 1460, lines: ["인천1호선"]},
            {id: "신포인천", name: "신포", x: 350, y: 1440, lines: ["인천1호선"]},
            {id: "숭의인천", name: "숭의", x: 330, y: 1420, lines: ["인천1호선"]},
            {id: "인하대인천", name: "인하대", x: 310, y: 1400, lines: ["인천1호선"]},
            {id: "송도인천", name: "송도", x: 290, y: 1380, lines: ["인천1호선"]},
            {id: "연수인천", name: "연수", x: 270, y: 1360, lines: ["인천1호선"]},
            {id: "원인재인천", name: "원인재", x: 250, y: 1340, lines: ["인천1호선"]},
            {id: "남동인더스파크인천", name: "남동인더스파크", x: 230, y: 1320, lines: ["인천1호선"]},
            {id: "호구포인천", name: "호구포", x: 210, y: 1300, lines: ["인천1호선"]},
            {id: "인천논현인천", name: "인천논현", x: 190, y: 1280, lines: ["인천1호선"]},
            {id: "소래포구인천", name: "소래포구", x: 170, y: 1260, lines: ["인천1호선"]},
            {id: "월곶인천", name: "월곶", x: 150, y: 1240, lines: ["인천1호선"]},
            {id: "달월인천", name: "달월", x: 130, y: 1220, lines: ["인천1호선"]},
            {id: "사리인천", name: "사리", x: 110, y: 1200, lines: ["인천1호선"]},
            {id: "야목인천", name: "야목", x: 90, y: 1180, lines: ["인천1호선"]},
            {id: "어천인천", name: "어천", x: 70, y: 1160, lines: ["인천1호선"]},
            {id: "오목천인천", name: "오목천", x: 50, y: 1140, lines: ["인천1호선"]},
            {id: "고색인천", name: "고색", x: 30, y: 1120, lines: ["인천1호선"]},
            {id: "수원인천", name: "수원", x: 10, y: 1100, lines: ["인천1호선"]},
            
            // 인천2호선 주요 역들
            {id: "검단오류", name: "검단오류", x: -100, y: 1900, lines: ["인천2호선"]},
            {id: "왕길", name: "왕길", x: -80, y: 1880, lines: ["인천2호선"]},
            {id: "검단사거리", name: "검단사거리", x: -60, y: 1860, lines: ["인천2호선"]},
            {id: "마전", name: "마전", x: -40, y: 1840, lines: ["인천2호선"]},
            {id: "완정", name: "완정", x: -20, y: 1820, lines: ["인천2호선"]},
            {id: "독정", name: "독정", x: 0, y: 1800, lines: ["인천2호선"]},
            {id: "검암인천2", name: "검암", x: 20, y: 1780, lines: ["인천2호선"]},
            {id: "검바위", name: "검바위", x: 40, y: 1760, lines: ["인천2호선"]},
            {id: "아시아드경기장", name: "아시아드경기장", x: 60, y: 1740, lines: ["인천2호선"]},
            {id: "서구청", name: "서구청", x: 80, y: 1720, lines: ["인천2호선"]},
            {id: "가정중앙시장", name: "가정중앙시장", x: 100, y: 1700, lines: ["인천2호선"]},
            {id: "가정", name: "가정", x: 120, y: 1680, lines: ["인천2호선"]},
            {id: "석남인천2", name: "석남", x: 140, y: 1660, lines: ["인천2호선"]},
            {id: "서부여성회관", name: "서부여성회관", x: 160, y: 1640, lines: ["인천2호선"]},
            {id: "인천가좌", name: "인천가좌", x: 180, y: 1620, lines: ["인천2호선"]},
            {id: "가재울", name: "가재울", x: 200, y: 1600, lines: ["인천2호선"]},
            {id: "주안국가산단", name: "주안국가산단", x: 220, y: 1580, lines: ["인천2호선"]},
            {id: "주안인천2", name: "주안", x: 240, y: 1560, lines: ["인천2호선"]},
            {id: "시민공원", name: "시민공원", x: 260, y: 1540, lines: ["인천2호선"]},
            {id: "석바위시장", name: "석바위시장", x: 280, y: 1520, lines: ["인천2호선"]},
            {id: "인천시청", name: "인천시청", x: 300, y: 1500, lines: ["인천2호선"]},
            {id: "예술회관", name: "예술회관", x: 320, y: 1480, lines: ["인천2호선"]},
            {id: "인천터미널", name: "인천터미널", x: 340, y: 1460, lines: ["인천2호선"]},
            {id: "문학경기장", name: "문학경기장", x: 360, y: 1440, lines: ["인천2호선"]},
            {id: "선학", name: "선학", x: 380, y: 1420, lines: ["인천2호선"]},
            {id: "신연수", name: "신연수", x: 400, y: 1400, lines: ["인천2호선"]},
            {id: "원인재인천2", name: "원인재", x: 420, y: 1380, lines: ["인천2호선"]},
            {id: "남동구청", name: "남동구청", x: 440, y: 1360, lines: ["인천2호선"]},
            {id: "만수", name: "만수", x: 460, y: 1340, lines: ["인천2호선"]},
            {id: "모래내시장", name: "모래내시장", x: 480, y: 1320, lines: ["인천2호선"]},
            {id: "운연", name: "운연", x: 500, y: 1300, lines: ["인천2호선"]}
        ];
        
        const connections = [
            // 1호선
            {line: "1호선", path: ["소요산", "의정부", "도봉산", "석계", "회기", "청량리", "신설동", "동대문", "종로3가", "종각", "시청", "서울역", "용산", "노량진", "신길", "영등포", "신도림", "구로", "개봉", "오류동", "온수", "역곡", "소사", "부천", "중동", "송내", "부개", "부평", "백운", "동암", "간석", "주안", "도화", "제물포", "도원", "동인천", "인천"]},
            {line: "1호선", path: ["구로", "가산디지털단지", "금정", "군포", "당정", "의왕", "성균관대", "화서", "수원", "세류", "병점", "세마", "오산대", "오산", "진위", "송탄", "서정리", "지제", "평택지제", "평택", "성환", "직산", "두정", "천안", "봉명", "쌍용", "아산", "탕정", "배방", "온양온천", "신창"]},
            
            // 2호선
            {line: "2호선", path: ["시청", "을지로입구", "을지로3가", "을지로4가", "동대문역사문화공원", "신당", "상왕십리", "왕십리", "한양대", "뚝섬", "성수", "건대입구", "구의", "강변", "잠실나루", "잠실", "잠실새내", "종합운동장", "삼성", "선릉", "역삼", "강남", "교대", "서초", "방배", "사당", "낙성대", "서울대입구", "봉천", "신림", "신대방", "구로디지털단지", "대림", "신도림", "문래", "영등포구청", "당산", "합정", "홍대입구", "신촌", "이대", "아현", "충정로", "시청"]},
            {line: "2호선", path: ["성수", "용답", "신답", "용두"]},
            {line: "2호선", path: ["신도림", "까치산"]},
            
            // 3호선
            {line: "3호선", path: ["대화", "정발산", "대곡", "화정", "연신내", "불광", "경복궁", "안국", "종로3가", "을지로3가", "충무로", "약수", "옥수", "압구정", "신사", "고속터미널", "교대", "양재", "도곡", "수서", "가락시장", "오금"]},
            
            // 4호선
            {line: "4호선", path: ["당고개", "상계", "노원", "창동", "쌍문", "수유", "미아", "미아사거리", "길음", "성신여대입구", "한성대입구", "혜화", "동대문", "동대문역사문화공원", "충무로", "명동", "회현", "서울역", "삼각지", "신용산", "이촌", "동작", "총신대입구", "사당", "남태령", "선바위", "경마공원", "대공원", "과천", "정부과천청사", "인덕원", "평촌", "범계", "금정", "산본", "수리산", "대야미", "반월", "상록수", "한대앞", "중앙", "고잔", "초지", "안산", "신길온천", "정왕", "오이도"]},
            
            // 5호선
            {line: "5호선", path: ["방화", "개화산", "김포공항", "송정", "마곡", "발산", "우장산", "화곡", "목동", "오목교", "양평", "영등포시장", "신길", "여의도", "여의나루", "마포", "공덕", "애오개", "충정로", "서대문", "광화문", "종로3가", "을지로4가", "동대문역사문화공원", "청구", "신금호", "행당", "왕십리", "마장", "답십리", "장한평", "군자", "아차산", "광나루", "천호", "강동", "길동", "굽은다리", "명일", "고덕", "상일동"]},
            {line: "5호선", path: ["신길", "오금5"]},
            {line: "5호선", path: ["천호", "둔촌동", "올림픽공원", "방이", "오금5", "개롱", "거여", "마천"]},
            {line: "5호선", path: ["까치산", "충정로"]},
            
            // 6호선
            {line: "6호선", path: ["응암", "연신내", "불광", "디지털미디어시티", "월드컵경기장", "상수", "합정", "공덕", "삼각지", "이태원", "약수", "청구", "신당", "보문", "고려대", "석계", "태릉입구", "봉화산"]},
            
            // 7호선
            {line: "7호선", path: ["장암", "도봉산7", "수락산", "마들", "노원", "중계", "하계", "공릉", "태릉입구", "먹골", "중화", "상봉", "면목", "사가정", "용마산", "중곡", "군자", "어린이대공원", "건대입구", "뚝섬유원지", "청담", "강남구청", "학동", "논현", "반포", "고속터미널", "내방", "이수", "숭실대입구", "상도", "장승배기", "신대방삼거리", "보라매", "신풍", "대림", "남구로", "가산디지털단지", "철산", "광명사거리", "천왕", "온수", "까치울", "부천종합운동장", "춘의", "신중동", "부천시청", "상동", "삼산체육관", "굴포천", "부평구청", "산곡", "석남"]},
            
            // 8호선
            {line: "8호선", path: ["암사", "천호", "몽촌토성", "잠실", "석촌", "가락시장", "문정", "복정", "모란"]},
            
            // 9호선
            {line: "9호선", path: ["개화", "김포공항", "신방화", "염창", "당산", "국회의사당", "여의도", "노량진", "고속터미널", "신논현", "종합운동장", "봉은사"]},
            
            // 신분당선
            {line: "신분당선", path: ["강남", "양재", "판교", "정자", "미금", "수지구청", "광교"]},
            
            // 경의중앙선
            {line: "경의중앙선", path: ["임진강", "운천", "문산", "파주", "월롱", "운정", "야당", "금릉", "금촌", "탄현", "일산", "풍산", "백마", "곡산", "대곡경의", "능곡", "대화경의", "행신", "강매", "홍대입구", "디지털미디어시티경의", "수색", "용산경의", "이촌경의", "서빙고", "한남", "옥수경의", "응봉", "왕십리경의", "청량리경의중앙", "회기경의중앙", "중랑경의", "상봉", "망우", "양원", "구리", "도농", "양정", "덕소", "도심", "팔당", "운길산", "양수", "신원", "국수", "아신", "오빈", "양평", "원덕", "용문", "지평"]},
            
            // GTXA
            {line: "GTXA-A", path: ["킨텍스", "대곡", "창릉", "고양", "서울역"]},
            {line: "GTXA-C", path: ["수서", "동탄"]},
            
            // 수인분당선
            {line: "수인분당선", path: ["청량리", "왕십리수인분당", "서울숲", "압구정로데오", "선릉", "한티", "도곡수인분당", "구룡", "개포동", "대모산입구", "수서수인분당", "복정수인분당", "가천대", "태평", "모란수인분당", "야탑수인분당", "이매수인분당", "서현", "판교수인분당", "정자수인분당", "미금수인분당", "오리", "죽전", "보정", "구성", "신갈", "기흥", "상갈", "청명", "영통", "망포", "매탄권선", "수원수인분당", "고색", "오목천", "어천", "야목", "사리", "달월", "월곶", "소래포구", "인천논현", "호구포", "남동인더스파크", "원인재", "연수", "송도", "인하대", "숭의", "신포", "인천수인분당"]},
            
            // 김포골드라인
            {line: "김포골드라인", path: ["김포공항", "운양", "장기", "김포한강", "마송", "풍무", "김포시청", "양촌"]},
            
            // 우이신설선
            {line: "우이신설선", path: ["우이", "북한산우이", "정릉", "성신여대입구", "보문", "신설동"]},
            
            // 경강선
            {line: "경강선", path: ["판교", "삼동", "이매", "경기광주", "초월", "곤지암", "신둔도예촌", "이천", "부발", "세종대왕릉", "여주"]},
            
            // 경춘선
            {line: "경춘선", path: ["청량리경춘", "회기경춘", "중랑", "상봉경춘", "망우경춘", "신내", "갈매", "별내", "퇴계원", "사릉", "금곡", "평내호평", "천마산", "마석", "대성리", "청평", "상천", "가평", "굴봉산", "백양리", "강촌", "김유정", "남춘천", "춘천"]},
            
            // 공항철도
            {line: "공항철도", path: ["서울역공항", "공덕공항", "홍대입구공항", "디지털미디어시티공항", "김포공항공항", "계양", "검암", "청라국제도시", "영종", "운서", "공항화물청사", "인천국제공항1터미널", "인천국제공항2터미널"]},
            
            // 신림선
            {line: "신림선", path: ["대방", "신길", "보라매병원", "보라매공원", "신림", "서원", "서울대벤처타운", "관악산"]},
            
            // 인천1호선
            {line: "인천1호선", path: ["계양인천", "귤현", "박촌", "임학", "계산", "경인교대입구", "작전", "갈산", "부평인천", "부평구청인천", "부평시장", "백운인천", "동암인천", "간석인천", "주안인천", "도화인천", "제물포인천", "도원인천", "동인천인천", "인천인천", "신포인천", "숭의인천", "인하대인천", "송도인천", "연수인천", "원인재인천", "남동인더스파크인천", "호구포인천", "인천논현인천", "소래포구인천", "월곶인천", "달월인천", "사리인천", "야목인천", "어천인천", "오목천인천", "고색인천", "수원인천"]},
            
            // 인천2호선
            {line: "인천2호선", path: ["검단오류", "왕길", "검단사거리", "마전", "완정", "독정", "검암인천2", "검바위", "아시아드경기장", "서구청", "가정중앙시장", "가정", "석남인천2", "서부여성회관", "인천가좌", "가재울", "주안국가산단", "주안인천2", "시민공원", "석바위시장", "인천시청", "예술회관", "인천터미널", "문학경기장", "선학", "신연수", "원인재인천2", "남동구청", "만수", "모래내시장", "운연"]}
        ];
        
        function getTerminalStations() {
            return [
                // 1호선
                {stationId: "소요산", line: "1호선", number: "1", offsetX: -30, offsetY: -5},
                {stationId: "인천", line: "1호선", number: "1", offsetX: 30, offsetY: -5},
                {stationId: "신창", line: "1호선", number: "1", offsetX: 30, offsetY: -5},
                
                // 3호선
                {stationId: "대화", line: "3호선", number: "3", offsetX: -30, offsetY: -5},
                {stationId: "오금", line: "3호선", number: "3", offsetX: 30, offsetY: -5},
                
                // 4호선
                {stationId: "당고개", line: "4호선", number: "4", offsetX: -30, offsetY: -5},
                {stationId: "오이도", line: "4호선", number: "4", offsetX: 30, offsetY: -5},
                
                // 5호선
                {stationId: "방화", line: "5호선", number: "5", offsetX: -30, offsetY: -5},
                {stationId: "상일동", line: "5호선", number: "5", offsetX: 30, offsetY: -5},
                {stationId: "마천", line: "5호선", number: "5", offsetX: 30, offsetY: -5},
                
                // 6호선
                {stationId: "응암", line: "6호선", number: "6", offsetX: -30, offsetY: -5},
                {stationId: "봉화산", line: "6호선", number: "6", offsetX: 30, offsetY: -5},
                
                // 7호선
                {stationId: "장암", line: "7호선", number: "7", offsetX: -30, offsetY: -5},
                {stationId: "석남", line: "7호선", number: "7", offsetX: -30, offsetY: -5},
                
                // 8호선
                {stationId: "암사", line: "8호선", number: "8", offsetX: 30, offsetY: -5},
                {stationId: "모란", line: "8호선", number: "8", offsetX: -30, offsetY: -5},
                
                // 9호선
                {stationId: "개화", line: "9호선", number: "9", offsetX: -30, offsetY: -5},
                {stationId: "봉은사", line: "9호선", number: "9", offsetX: 30, offsetY: -5},
                
                // 신분당선
                {stationId: "강남", line: "신분당선", number: "신분당", offsetX: -40, offsetY: -5},
                {stationId: "광교", line: "신분당선", number: "신분당", offsetX: 30, offsetY: -5},
                
                // 경의중앙선
                {stationId: "임진강", line: "경의중앙선", number: "경의중앙", offsetX: -50, offsetY: -5},
                {stationId: "지평", line: "경의중앙선", number: "경의중앙", offsetX: 50, offsetY: -5},
                
                // GTXA
                {stationId: "킨텍스", line: "GTXA-A", number: "GTX-A", offsetX: -40, offsetY: -5},
                {stationId: "서울역", line: "GTXA-A", number: "GTX-A", offsetX: -40, offsetY: 30},
                {stationId: "수서", line: "GTXA-C", number: "GTX-C", offsetX: -40, offsetY: 30},
                {stationId: "동탄", line: "GTXA-C", number: "GTX-C", offsetX: 40, offsetY: -5},
                
                // 수인분당선
                {stationId: "청량리", line: "수인분당선", number: "수인분당", offsetX: -50, offsetY: 30},
                {stationId: "인천", line: "수인분당선", number: "수인분당", offsetX: -50, offsetY: 30},
                
                // 김포골드라인
                {stationId: "김포공항", line: "김포골드라인", number: "김포골드", offsetX: -50, offsetY: 30},
                {stationId: "양촌", line: "김포골드라인", number: "김포골드", offsetX: -50, offsetY: -5},
                
                // 우이신설선
                {stationId: "우이", line: "우이신설선", number: "우이신설", offsetX: -50, offsetY: -5},
                {stationId: "신설동", line: "우이신설선", number: "우이신설", offsetX: -50, offsetY: 30},
                
                // 경춘선
                {stationId: "청량리경춘", line: "경춘선", number: "경춘", offsetX: -40, offsetY: 30},
                {stationId: "춘천", line: "경춘선", number: "경춘", offsetX: 40, offsetY: -5},
                
                // 공항철도
                {stationId: "서울역공항", line: "공항철도", number: "공항철도", offsetX: -50, offsetY: 30},
                // 경강선
                {stationId: "판교", line: "경강선", number: "경강", offsetX: -30, offsetY: 30},
                {stationId: "여주", line: "경강선", number: "경강", offsetX: 30, offsetY: -5},
                
                // 신림선
                {stationId: "대방", line: "신림선", number: "신림", offsetX: -30, offsetY: -5},
                {stationId: "관악산", line: "신림선", number: "신림", offsetX: -30, offsetY: -5},
                
                // 인천1호선
                {stationId: "계양인천", line: "인천1호선", number: "인천1", offsetX: -30, offsetY: -5},
                {stationId: "수원인천", line: "인천1호선", number: "인천1", offsetX: -30, offsetY: -5},
                
                // 인천2호선
                {stationId: "검단오류", line: "인천2호선", number: "인천2", offsetX: -30, offsetY: -5},
                {stationId: "운연", line: "인천2호선", number: "인천2", offsetX: 30, offsetY: -5}
            ];
        }
        
        function generateLinePaths() {
            const stationMap = new Map();
            stations.forEach(station => {
                stationMap.set(station.id, station);
            });
            
            return connections.map(conn => {
                const lineStations = conn.path.map(stationId => {
                    const station = stationMap.get(stationId);
                    if (!station) {
                        console.warn(`Station not found: ${stationId}`);
                        return null;
                    }
                    return station;
                }).filter(station => station !== null);
                
                return {
                    line: conn.line,
                    stations: lineStations,
                    path: lineStations.map(s => ({x: s.x, y: s.y}))
                };
            });
        }
        
        function subdivideLinePath(path, subdivisions = 4) {
            if (path.length < 2) return path;
            const result = [];
            for (let i = 0; i < path.length - 1; i++) {
                const start = path[i];
                const end = path[i + 1];
                result.push(start);
                for (let j = 1; j < subdivisions; j++) {
                    const t = j / subdivisions;
                    result.push({
                        x: start.x + (end.x - start.x) * t,
                        y: start.y + (end.y - start.y) * t
                    });
                }
            }
            result.push(path[path.length - 1]);
            return result;
        }
        
        function drawLines(linesData) {
            g.selectAll(".subway-line").remove();
            linesData.forEach(line => {
                const subdividedPath = subdivideLinePath(line.path, 3);
                const lineGenerator = d3.line()
                    .x(d => d.x)
                    .y(d => d.y)
                    .curve(d3.curveCatmullRom.alpha(0.5));
                
                g.append("path")
                    .attr("class", "subway-line")
                    .attr("d", lineGenerator(subdividedPath))
                    .attr("stroke", lineColors[line.line] || "#888")
                    .attr("stroke-width", 2.5)
                    .attr("fill", "none");
            });
        }
        
        function drawStations(stationsData) {
            g.selectAll(".station").remove();
            g.selectAll(".line-number").remove();
            
            const stationGroups = g.selectAll(".station")
                .data(stationsData)
                .enter()
                .append("g")
                .attr("class", "station")
                .attr("transform", d => `translate(${d.x}, ${d.y})`)
                .on("mouseover", handleStationMouseOver)
                .on("mouseout", resetFisheyeEffect)
                .on("wheel", handleStationWheel)
                .on("click", handleStationClick);
            
            stationGroups.each(function(d) {
                const station = d3.select(this);
                if (d.lines.length > 1) {
                    const angleStep = (2 * Math.PI) / d.lines.length;
                    d.lines.forEach((line, i) => {
                        const startAngle = i * angleStep;
                        const endAngle = (i + 1) * angleStep;
                        const arc = d3.arc()
                            .innerRadius(0)
                            .outerRadius(8)
                            .startAngle(startAngle)
                            .endAngle(endAngle);
                        station.append("path")
                            .attr("d", arc)
                            .attr("fill", lineColors[line] || "#888");
                    });
                } else {
                    station.append("circle")
                        .attr("r", 5)
                        .attr("fill", lineColors[d.lines[0]] || "#888");
                }
                station.append("text")
                    .attr("class", "station-label")
                    .attr("dy", 20)
                    .text(d.name);
            });
            
            // 종점역에 노선 번호 표시
            const terminalStations = getTerminalStations();
            terminalStations.forEach(terminal => {
                const station = stationsData.find(s => s.id === terminal.stationId);
                if (station) {
                    g.append("text")
                        .attr("class", "line-number")
                        .attr("x", station.x + terminal.offsetX)
                        .attr("y", station.y + terminal.offsetY)
                        .attr("text-anchor", "middle")
                        .attr("dominant-baseline", "central")
                        .style("font-size", "20px")
                        .style("font-weight", "bold")
                        .style("fill", lineColors[terminal.line] || "#888")
                        .style("pointer-events", "none")
                        .text(terminal.number);
                }
            });
        }
        
        function fisheye(cx, cy, radius, distortion) {
            return function(x, y) {
                const dx = x - cx;
                const dy = y - cy;
                const distance = Math.sqrt(dx * dx + dy * dy);
                let factor = 1;
                if (distance < radius) {
                    const normalizedDist = distance / radius;
                    const fluidFactor = Math.cos(normalizedDist * Math.PI / 2);
                    factor = 1 + (distortion * fluidFactor);
                } else {
                    const falloff = Math.exp(-(distance - radius) / (radius * 0.5));
                    factor = 1 - 0.2 * falloff * Math.min(1, (distance - radius) / (radius * 1.5));
                }
                const angle = Math.atan2(dy, dx);
                const angleFactor = (distance < radius) ? 
                    (1 - distance / radius) * 0.05 * distortion * Math.sin(angle * 2) : 0;
                const newX = cx + dx * factor + dy * angleFactor;
                const newY = cy + dy * factor - dx * angleFactor;
                return {x: newX, y: newY, scale: factor};
            };
        }
        
        function applyFisheyeEffect(cx, cy, isConvex = true) {
            const distortionValue = 5; // 최대값
            const radiusValue = 400; // 최대값
            const smoothnessValue = 10; // 최대값
            const distortion = isConvex ? distortionValue : -distortionValue * 0.7;
            const transform = fisheye(cx, cy, radiusValue, distortion);
            
            const transformedStations = stations.map(station => {
                const result = transform(station.x, station.y);
                return {...station, x: result.x, y: result.y, scale: result.scale};
            });
            
            const lines = generateLinePaths();
            const subdivisionCount = Math.max(3, Math.floor(smoothnessValue));
            const transformedLines = lines.map(line => {
                const refinedPath = subdivideLinePath(line.path, subdivisionCount);
                const transformedPath = refinedPath.map(point => {
                    const result = transform(point.x, point.y);
                    return {x: result.x, y: result.y};
                });
                return {...line, path: transformedPath};
            });
            
            g.selectAll(".subway-line")
                .data(transformedLines)
                .join("path")
                .attr("class", "subway-line")
                .transition()
                .duration(800)
                .ease(d3.easeCubicOut)
                .attr("d", line => {
                    const lineGenerator = d3.line()
                        .x(d => d.x)
                        .y(d => d.y)
                        .curve(d3.curveCatmullRom.alpha(0.5));
                    return lineGenerator(line.path);
                })
                .attr("stroke", line => lineColors[line.line] || "#888")
                .attr("stroke-width", 2.5)
                .attr("fill", "none");
            
            g.selectAll(".station")
                .data(transformedStations)
                .join("g")
                .attr("class", "station")
                .transition()
                .duration(800)
                .ease(d3.easeCubicOut)
                .attr("transform", d => `translate(${d.x}, ${d.y})`);
            
            g.selectAll(".line-number")
                .data(getTerminalStations())
                .join("text")
                .attr("class", "line-number")
                .transition()
                .duration(800)
                .ease(d3.easeCubicOut)
                .attr("x", d => {
                    const station = transformedStations.find(s => s.id === d.stationId);
                    return station ? station.x + d.offsetX : 0;
                })
                .attr("y", d => {
                    const station = transformedStations.find(s => s.id === d.stationId);
                    return station ? station.y + d.offsetY : 0;
                })
                .attr("text-anchor", "middle")
                .attr("dominant-baseline", "central")
                .style("font-size", "20px")
                .style("font-weight", "bold")
                .style("fill", d => lineColors[d.line] || "#888")
                .style("pointer-events", "none")
                .text(d => d.number);
        }
        
        function resetFisheyeEffect() {
            const lines = generateLinePaths();
            drawLines(lines);
            drawStations(stations);
        }
        
        function handleStationMouseOver(event, d) {
            applyFisheyeEffect(d.x, d.y, true);
        }
        
        function handleStationWheel(event, d) {
            event.preventDefault();
            const isZoomIn = event.deltaY < 0;
            applyFisheyeEffect(d.x, d.y, isZoomIn);
        }
        
        function handleStationClick(event, d) {
            const currentDistortion = 5;
            applyFisheyeEffect(d.x, d.y, true);
            setTimeout(() => {
                resetFisheyeEffect();
            }, 2000);
        }
        
        function initializeMap() {
            const lines = generateLinePaths();
            drawLines(lines);
            drawStations(stations);
            svg.call(zoom.transform, d3.zoomIdentity.translate(width/2 - 1000, height/2 - 1300).scale(0.3));
        }
        
        initializeMap();
    </script>
</body>
</html>